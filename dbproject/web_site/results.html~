
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{% include "header.html" %}
{% load kipho_filters %}
{% load macros %}

{% macro pagination pager %}
						<div class="pagination">
							<span class="step-links">
								{% if pager.has_previous %}
									<a href="?{{ getparams }}&page={{ pager.previous_page_number }}">previous</a>
								{% endif %}

								<span class="current">
									Page {{ pager.number }} of {{ pager.paginator.num_pages }}.
								</span>

								{% if pager.has_next %}
									<a href="?{{ getparams }}&page={{ pager.next_page_number }}">next</a>
								{% endif %}
							</span>
						</div>
{% endmacro %}`


			<div class="main">

				<!--Are there any protein results? If yes, display them in a table.-->
				{% if proteins %}
				<div class="bluebox">
					<h1>Proteins</h1><br/>
					<p>The following proteins matched your query:</p><br/>

					{% usemacro pagination proteins %}
					<table border=1 width="680">
						<tr><th>Accession</th><th>Name</th><th>Type</th><th>Substrate</th><th>Organism</th><th>Reviewed</th><th>Source</th></tr>
						{% for protein in proteins.object_list %}
						<tr>
							<td><a href="protein?accession_number='{{protein.accession_number}}'">{{protein.accession_number}}</a></td>
							<td>{{protein.protein_name}}</td>
							<td>{{protein.protein_type|protein_type}}</td>
							<td>{{protein.substrate|substrate}}</td>
							<td>{{protein.organism_name}}</td>
							<td>{{protein.reviewed|reviewed}}</td>
							<td>{{protein.source}}</td>
						</tr>
						{% endfor %}
					</table><br/><br/>
					<p><b>Generate a phylogenetic tree with these proteins.</b></p><br/>
					<form name="ClustalW" method="post" action="generateTree.html">
						<input type="text" size="80" name="Proteins" value="{{proteins.object_list|accession_list}}">
						<input type="submit" value="Generate tree">
					</form>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any domain results? If yes, display them in a table.-->
				{% if domains %}
				<div class="bluebox">
					<h1>Domains</h1><br/>
					<p>The following domains matched your query:</p><br/>

					{% usemacro pagination domains %}
					<table border=1 width="680">
						<tr><th>PFAM ID</th><th>Name</th><th>Description</th></tr>
						{% for domain in domains.object_list  %}
						<tr>
							<td><a href='domain?pfam_id="{{domain.pfam_id}}"'>{{domain.pfam_id}}</a></td>
							<td>{{domain.name}}</td>
							<td>{{domain.description}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any phosphorylation site results? If yes, display them in a table.-->
				{% if phosphorylation_sites %}
				<div class="bluebox">
					<h1>Phosphorylation Sites</h1><br/>
					<p>The following phosphorylation sites matched your query:</p><br/>

                                  {% usemacro pagination phosphorylation_sites %}
					<table border=1 width="680">
						<tr><th>ID</th><th>Protein Accession</th><th>Amino Acid</th><th>Position</th><th>Motif</th><th>Reviewed</th><th>Source</th></tr>
						{% for psite in phosphorylation_sites.object_list %}
						<tr>
							<td><a href="phosphorylation_site?phosphosite_id='{{psite.phosphosite_id}}'">{{psite.phosphosite_id}}</a></td>
							<td><a href="protein?accession_number='{{psite.accession_number}}'">{{psite.accession_number}}</a></td>
							<td>{{psite.amino_acid}}</td>
							<td>{{psite.position}}</td>
							<td>{{psite.motif}}</td>
							<td>{{psite.reviewed|reviewed}}</td>
							<td>{{psite.source}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any reaction results? If yes, display them in a table.-->
				{% if reactions %}
				<div class="bluebox">
					<h1>Reactions</h1><br/>
					<p>The following reactions matched your query:</p><br/>

					{% usemacro pagination reactions %}
					<table border=1 width="680">
						<tr><th>ID</th><th>Kinase/Phosphatase</th><th>Substrate</th><th>Type</th><th>Effect</th><th>Reviewed</th><th>Source</th></tr>
						{% for reaction in reactions.object_list %}
						<tr>
							<td><a href="reaction?reaction_id={{reaction.reaction_id}}">{{ reac_ids|hash:reaction.reaction_id }}</a></td>
							<td><a href="protein?accession_number='{{reaction.ki_pho_accession_number}}'">{{reaction.ki_pho_accession_number}}</a></td>
							<td><a href="protein?accession_number='{{reaction.substrate_accession_number}}'">{{reaction.substrate_accession_number}}</a></td>
							<td>{{reaction.reaction_type|reaction_type}}</td>
							<td>{{reaction.reaction_effect|reaction_effect}}</td>
							<td>{{reaction.reviewed|reviewed}}</td>
							<td>{{reaction.source}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any pathway results? If yes, display them in a table-->
				{% if pathways %}
				<div class="bluebox">
					<h1>Pathways</h1><br/>
					<p>The following pathways matched your query:</p><br/>

					{% usemacro pagination pathways %}
					<table border=1 width="680">
						<tr><th>ID</th><th>Name</th><th>Organism</th><th>Reviewed</th><th>Source</th></tr>
						{% for pathway in pathways.object_list %}
						<tr>
							<td><a href="pathway?pathway_id={{pathway.pathway_id}}">{{ path_ids|hash:pathway.pathway_id }}</a></td>
							<td>{{pathway.pathway_name}}</td>
							<td>{{pathway.organism_name}}</td>
							<td>{{pathway.reviewed|reviewed}}</td>
							<td>{{pathway.source}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any organism results? If yes, display them in a table-->
				{% if organisms %}
				<div class="bluebox">
					<h1>Organisms</h1><br/>
					<p>The following organisms matched your query:</p><br/>

					{% usemacro pagination organisms %}
					<table border=1 width="680">
						<tr><th>Name</th><th>Common Name</th></tr>
						{% for organism in organisms.object_list %}
						<tr>
							<td><a href="organism?organism_name=\'{{organism.organism_name}}\'">{{organism.organism_name}}</a></td>
							<td>{{organism.common_name}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}
	
				<!--Are there any tree results? If yes display them in a table.-->
				{% if trees %}
				<div class="bluebox">
					<h1>Trees</h1><br/>
					<p>The following phylogenetic trees matched your query:</p><br/>
					<table border=1 width="680">
						<tr><th>ID</th><th>Name</th><th>Reviewed</th></tr>
						{% for tree in trees.object_list  %}
						<tr>
							<td><a href="tree?tree_id={{tree.tree_id}}">{{tree.tree_id}}</a></td>
							<td>{{tree.name}}</td>
							<td>{{tree.reviewed|reviewed}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any GO term results? if yes, display them in a table.-->
				{% if goterms %}
				<div class="bluebox">
					<h1>GO Terms</h1><br/>
					<p>The following GO terms matched your query:</p><br/>

					{% usemacro pagination goterms %}
					<table border=1 width="680">
						<tr><th>GO Term</th><th>Name</th></tr>
						{% for goterm in goterms.object_list %}
						<tr>
							<td><a href='go_term?go_term="{{goterm.go_term}}"'>{{goterm.go_term}}</a></td>
							<td>{{goterm.name}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any reference results? If yes, display them in a table.-->
				{% if references %}
				<div class="bluebox">
					<h1>References</h1><br/>
					<p>The following references matched your query:</p><br/>

					{% usemacro pagination references %}
					<table border=1 width="680">
						<tr><th>PUBMED ID</th><th>Title</th><th>Authors</th></tr>
						{% for reference in references.object_list  %}
						<tr>
							<td><a href='reference?reference_id="{{reference.reference_id}}"'>{{reference.reference_id}}</a></td>
							<td>{{reference.title}}</td>
							<td>{{reference.authors}}</td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any kinfamily results? If yes, display them in a table.-->
				{% if kinfamily %}
				<div class="bluebox">
					<h1>Kinase Gene Families</h1><br/>
					<p>The following Kinase Gene Families matched your query:</p><br/>

					{% usemacro pagination kinfamily %}
					<table border=1 width="680">
						<tr><th>Gene</th><th>Full Name</th><th>Tree </th></tr>
						{% for family in kinfamily.object_list %}
						<tr>
							
							<td>{{family.gene_id}}</td>
							<td>{{family.gene_name}}</td>
							<td><a href="http://www.treefam.org/cgi-bin/treeview.pl?ac={{family.treefam_id}}&stype=clean&misc=aln&highlight={{family.treefam_id}}" target="_blank"> View Tree </a> </td>
					
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}

				<!--Are there any kinfamily results? If yes, display them in a table.-->
				{% if phosfamily %}
				<div class="bluebox">
					<h1>Phosphatase Gene Families</h1><br/>
					<p>The following Phosphatase Gene Families matched your query:</p><br/>
					{% usemacro pagination phosfamily %}
					<table border=1 width="680">
						<tr><th>Gene</th><th>Full Name</th><th>Tree </th></tr>
						{% for family in phosfamily.object_list %}
						<tr>
							<td>{{family.gene_id}}</td>
							<td>{{family.gene_name}}</td>
							<td><a href="http://www.treefam.org/cgi-bin/treeview.pl?ac={{family.treefam_id}}&stype=clean&misc=aln&highlight={{family.treefam_id}}" target="_blank"> View Tree </a> </td>
						</tr>
						{% endfor %}
					</table><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}
	

				{% if families %}
				<div class="bluebox">
					<h1>Families</h1><br/>
					<p>The following proteins matched your query:</p><br/>
				{% usemacro pagination families %}
					<table border=1 width="680">
						<tr><th>Gene</th><th>Gene Name</th><th>View tree</th></tr>
						{% for family in families.object_list %}
						<tr>
							<td>{{family.gene_id}}</td>
							<td>{{family.gene_name}}</td>
					<td><a href="http://www.treefam.org/cgi-bin/treeview.pl?ac={{family.treefam_id}}&stype=clean&misc=aln&highlight={{family.treefam_id}}" target="_blank"> View Tree </a> </td>
							
						</tr>
						{% endfor %}
				{% endif %}

				{% if errors %}
				<div class="bluebox">
					<h1>Errors!</h1><br/>
					<p>Your search could not be executed due to the following errors:</p><br/>
					<p><i>{{errors}}</i></p><br/>
					<div class="cleaner">
						&nbsp;
					</div>
				</div>
				{% endif %}
			</div>
		</div>

		{% include "footer.html" %}

